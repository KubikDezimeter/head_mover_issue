<launch>
    <param name="use_sim_time" value="true" />


    <include file="$(find bitbots_common)/launch/load_robot_description.launch" />
    <!--include file="$(find bitbots_transform)/launch/transformer.launch" /-->
    <node pkg="rosbag" type="play" name="player" output="screen" args="--clock /home/judith/Dokumente/BitBots/rosbags/no-walking.bag" respawn="true"/>
    <!--no-walking.bag-->

    <!--<node name="rosbaglive" pkg="rosbaglive" type="play.py" args="/home/judith/Dokumente/BitBots/rosbags/20180828.bag" respawn="true"/>-->
    <!--<node name="rosbaglive" pkg="rosbaglive" type="play.py" args="/home/judith/Dokumente/BitBots/rosbags/mitTF/2018-05-09-11-59-29.bag" respawn="true"/>-->

    <!--node pkg="tf" type="static_transform_publisher" name="odom_broadcaster" args="42 1 -8 0 0 1 0 odom base_link 100" /-->

    <!-- fake pointcloud -->
    <node name="fake_pointcloud" pkg="bitbots_localization" type="fake_pointcloud.py" />

    <!-- fake laserscan -->
    <include file="$(find bitbots_localization)/launch/pointcloud_to_laserscan.launch" />

    <!-- load map -->
    <node name="map_server" pkg="map_server" type="map_server" output="screen" args="$(find bitbots_localization)/models/f031.yaml"/>

    <!-- particle filter -->
    <node name="amcl_particlefilter"  pkg="amcl" type="amcl" output="screen">

        <param name="min_particles" value="100"/>
        <param name="max_particles" value="5000"/>
        <param name="kld_err" value="0.01"/>

        <param name="update_min_d" value="0.001"/>
        <param name="update_min_a" value="0.01"/>

        <param name="resample_interval" value="2"/>

        <param name="initial_pose_x" value="1.3"/>
        <param name="initial_pose_y" value="2.0"/>
        <param name="initial_pose_a" value="-1.5"/>
        <param name="initial_cov_xx" value="1.0"/>
        <param name="initial_cov_yy" value="1.0"/>
        <param name="initial_cov_aa" value="2.0"/>

        <param name="gui_publish_rate" value="1.0"/>

        <param name="use_map_topic" value="true" />
        <param name="first_map_only" value="true"/>

        <param name="recovery_alpha_slow" value="0.001"/>
        <param name="recovery_alpha_fast" value="0.1"/>


        <param name="tf_broadcast" value="true"/>

    </node>

    <!-- hotfix nomotion update -->
    <node name="amcl_nomotion_update" pkg="bitbots_localization" type="amcl_nomotion_update.py" respawn="true"/>

</launch>
